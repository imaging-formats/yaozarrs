
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Yet another ome-zarr model.">
      
      
      
        <link rel="canonical" href="https://tlambert03.github.io/yaozarrs/API_Reference/yaozarrs/">
      
      
        <link rel="prev" href="../../ome_zarr_guide/">
      
      
        <link rel="next" href="../yaozarrs.v04/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>yaozarrs - YAOZARRS ‼️</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/zensical.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
  <!-- Load ome-explorer web component as ES module -->
  <script type="module" src="../../javascripts/ome_explorer.js"></script>

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#yaozarrs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="YAOZARRS ‼️" class="md-header__button md-logo" aria-label="YAOZARRS ‼️" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            YAOZARRS ‼️
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              yaozarrs
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tlambert03/yaozarrs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    tlambert03/yaozarrs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="YAOZARRS ‼️" class="md-nav__button md-logo" aria-label="YAOZARRS ‼️" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    YAOZARRS ‼️
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tlambert03/yaozarrs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    tlambert03/yaozarrs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.13 22.19-1.63-3.83c1.57-.58 3.04-1.36 4.4-2.27zM5.64 12.5l-3.83-1.63 6.1-2.77C7 9.46 6.22 10.93 5.64 12.5M21.61 2.39S16.66.269 11 5.93c-2.19 2.19-3.5 4.6-4.35 6.71-.28.75-.09 1.57.46 2.13l2.13 2.12c.55.56 1.37.74 2.12.46A19.1 19.1 0 0 0 18.07 13c5.66-5.66 3.54-10.61 3.54-10.61m-7.07 7.07c-.78-.78-.78-2.05 0-2.83s2.05-.78 2.83 0c.77.78.78 2.05 0 2.83s-2.05.78-2.83 0m-5.66 7.07-1.41-1.41zM6.24 22l3.64-3.64c-.34-.09-.67-.24-.97-.45L4.83 22zM2 22h1.41l4.77-4.76-1.42-1.41L2 20.59zm0-2.83 4.09-4.08c-.21-.3-.36-.62-.45-.97L2 17.76z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ome_zarr_explorer/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 2H3a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2M11 17.5 9.5 19 5 14.5 9.5 10l1.5 1.5-3 3zm3.5 1.5L13 17.5l3-3-3-3 1.5-1.5 4.5 4.5zM21 7H3V4h18z"/></svg>
  
  <span class="md-ellipsis">
    
  
    OME-Zarr Explorer
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ome_zarr_guide/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21.5c-1.35-.85-3.8-1.5-5.5-1.5-1.65 0-3.35.3-4.75 1.05-.1.05-.15.05-.25.05-.25 0-.5-.25-.5-.5V6c.6-.45 1.25-.75 2-1 1.11-.35 2.33-.5 3.5-.5 1.95 0 4.05.4 5.5 1.5 1.45-1.1 3.55-1.5 5.5-1.5 1.17 0 2.39.15 3.5.5.75.25 1.4.55 2 1v14.6c0 .25-.25.5-.5.5-.1 0-.15 0-.25-.05-1.4-.75-3.1-1.05-4.75-1.05-1.7 0-4.15.65-5.5 1.5M12 8v11.5c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5V7c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5m1 3.5c1.11-.68 2.6-1 4.5-1 .91 0 1.76.09 2.5.28V9.23c-.87-.15-1.71-.23-2.5-.23q-2.655 0-4.5.84zm4.5.17c-1.71 0-3.21.26-4.5.79v1.69c1.11-.65 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24v-1.5c-.87-.16-1.71-.23-2.5-.23m2.5 2.9c-.87-.16-1.71-.24-2.5-.24-1.83 0-3.33.27-4.5.8v1.69c1.11-.66 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Guide to OME-Zarr
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    yaozarrs
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    yaozarrs
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#yaozarrs" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;yaozarrs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" yaozarrs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaozarrs.DimSpec" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DimSpec
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DimSpec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaozarrs.DimSpec.infer_scale_factor" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;infer_scale_factor
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.DimSpec.infer_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;infer_type
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ZarrGroup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ZarrGroup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.ome_version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;ome_version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.validate" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;validate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.node_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;node_type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.prefetch_children" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;prefetch_children
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.to_zarr_python" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_zarr_python
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.open_group" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;open_group
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.validate_ome_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;validate_ome_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.validate_ome_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;validate_ome_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.validate_ome_uri" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;validate_ome_uri
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.validate_zarr_store" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;validate_zarr_store
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../yaozarrs.v04/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    yaozarrs.v04
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../yaozarrs.v05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    yaozarrs.v05
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../yaozarrs.write.v05/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    yaozarrs.write.v05
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#yaozarrs" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;yaozarrs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" yaozarrs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaozarrs.DimSpec" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DimSpec
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DimSpec">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaozarrs.DimSpec.infer_scale_factor" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;infer_scale_factor
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.DimSpec.infer_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;infer_type
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ZarrGroup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ZarrGroup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.ome_version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;ome_version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.validate" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;validate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.node_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;node_type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.prefetch_children" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;prefetch_children
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.ZarrGroup.to_zarr_python" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_zarr_python
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.open_group" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;open_group
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.validate_ome_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;validate_ome_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.validate_ome_object" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;validate_ome_object
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.validate_ome_uri" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;validate_ome_uri
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yaozarrs.validate_zarr_store" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;validate_zarr_store
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>yaozarrs</h1>

<div class="doc doc-object doc-module">



<h2 id="yaozarrs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>yaozarrs</code>


<a href="#yaozarrs" class="headerlink" title="Link to this section">#</a></h2>

    <div class="doc doc-contents first">

        <p>Yet another ome-zarr model.</p>






<p><span class="doc-section-title">Modules:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="yaozarrs.v04">v04</span></code></td>
            <td>
              <div class="doc-md-description">
                <p>OME-NGFF v0.4 metadata models.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="yaozarrs.v05">v05</span></code></td>
            <td>
              <div class="doc-md-description">
                <p>OME-NGFF v0.5 metadata models.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="yaozarrs.write">write</span></code></td>
            <td>
              <div class="doc-md-description">
                <p>Write utilities for yaozarrs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>






<p><span class="doc-section-title">Classes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;code&gt;DimSpec&lt;/code&gt; (&lt;code&gt;yaozarrs.DimSpec&lt;/code&gt;)" href="#yaozarrs.DimSpec">DimSpec</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Specification for a single dimension of an OME-Zarr image.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;code&gt;ZarrGroup&lt;/code&gt; (&lt;code&gt;yaozarrs.ZarrGroup&lt;/code&gt;)" href="#yaozarrs.ZarrGroup">ZarrGroup</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Minimal wrapper around a zarr v2/v3 group.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>




<p><span class="doc-section-title">Functions:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-function&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;open_group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;storage_options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.open_group&lt;/code&gt;)" href="#yaozarrs.open_group">open_group</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Open a zarr v2/v3 group from a URI.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-function&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;validate_ome_json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.validate_ome_json&lt;/code&gt;)" href="#yaozarrs.validate_ome_json">validate_ome_json</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Validate any ome-zarr JSON string or bytes literal.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-function&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;validate_ome_object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.validate_ome_object&lt;/code&gt;)" href="#yaozarrs.validate_ome_object">validate_ome_object</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Validate any python object representing an OME-Zarr document or node.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-function&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;validate_ome_uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;cls&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.validate_ome_uri&lt;/code&gt;)" href="#yaozarrs.validate_ome_uri">validate_ome_uri</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Load and validate root metadata in a OME-Zarr group from a URI or local path.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-function&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;validate_zarr_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.validate_zarr_store&lt;/code&gt;)" href="#yaozarrs.validate_zarr_store">validate_zarr_store</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Validate both structure and metadata of an OME-Zarr hierarchy.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>





<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="yaozarrs.DimSpec" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>DimSpec</code>


<a href="#yaozarrs.DimSpec" class="headerlink" title="Link to this section">#</a></h3>


    <div class="doc doc-contents ">



        <p>Specification for a single dimension of an OME-Zarr image.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is a convenience class and is <strong>not</strong> a part of the OME-Zarr specification.</p>
</div>
<p>There are some places in the OME Zarr spec where information about a given axis must
be entered in multiple different places (e.g., <code>Multiscale.axes</code> must agree with
<code>Multiscale.datasets.CoordinateTransformation</code>, etc). <code>DimSpec</code> is a convenience
class that encapsulates all the relevant information about a single dimension in one
place, and may be used in specialized constructors (e.g. <code>v05.Multiscale.from_dims</code>)</p>


<p><span class="doc-section-title">Examples:</span></p>
    <p>5D timelapse with channels:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><span class="kn">from</span><span class="w"> </span><span class="nn">yaozarrs</span><span class="w"> </span><span class="kn">import</span> <span class="n">DimSpec</span><span class="p">,</span> <span class="n">v05</span>
</span><span id="__span-0-2">
</span><span id="__span-0-3"><span class="n">dims</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-0-4">    <span class="n">DimSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;second&quot;</span><span class="p">),</span>
</span><span id="__span-0-5">    <span class="n">DimSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
</span><span id="__span-0-6">    <span class="n">DimSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;micrometer&quot;</span><span class="p">),</span>
</span><span id="__span-0-7">    <span class="n">DimSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;micrometer&quot;</span><span class="p">),</span>
</span><span id="__span-0-8">    <span class="n">DimSpec</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;micrometer&quot;</span><span class="p">),</span>
</span><span id="__span-0-9"><span class="p">]</span>
</span><span id="__span-0-10"><span class="n">multiscale</span> <span class="o">=</span> <span class="n">v05</span><span class="o">.</span><span class="n">Multiscale</span><span class="o">.</span><span class="n">from_dims</span><span class="p">(</span><span class="n">dims</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_image&quot;</span><span class="p">,</span> <span class="n">n_levels</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span></code></pre></div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the dimension. Common names like 'x', 'y', 'z' will be inferred as spatial dimensions; 't' as time; 'c' as channel.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>size</code>
            </td>
            <td>
                  <code><span title="int">int</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The size of the dimension (number of elements along this axis). This is not used anywhere by the OME-Zarr spec, but is useful when creating new empty datasets.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>scale</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scale factor for this dimension in physical units.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>unit</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The physical unit for this dimension (e.g., 'micrometer', 'second'). If not provided, no unit will be set on the axis.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>type</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;space&#39;, &#39;time&#39;, &#39;channel&#39;] | <span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of axis ('space', 'time', 'channel', or custom). If not provided, will be inferred from the name: x/y/z -&gt; 'space', t -&gt; 'time', c -&gt; 'channel'.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>scale_factor</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scale factor for downsampling along this dimension at each multiscale level. If not provided, defaults to 2.0 for spatial dimensions (x/y/z) and 1.0 for others. To <em>avoid</em> downsampling along the z dimension (which is inferred to be a spatial dimension), set this explicitly to 1.0.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>translation</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The translation offset for this dimension in physical units. If not provided, no translation transform will be applied. If only some dimensions have translation specified, all others will default to 0.0.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;infer_scale_factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.DimSpec.infer_scale_factor&lt;/code&gt;)" href="#yaozarrs.DimSpec.infer_scale_factor">infer_scale_factor</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Infer the scale factor for downsampling based on dimension type.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;infer_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.DimSpec.infer_type&lt;/code&gt;)" href="#yaozarrs.DimSpec.infer_type">infer_type</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Infer the axis type from the dimension name.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/yaozarrs/_dim_spec.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-15"><span class="k">class</span><span class="w"> </span><span class="nc">DimSpec</span><span class="p">(</span><span class="n">_BaseModel</span><span class="p">):</span>
</span><span id="__span-0-16"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Specification for a single dimension of an OME-Zarr image.</span>
</span><span id="__span-0-17">
</span><span id="__span-0-18"><span class="sd">    !!! warning</span>
</span><span id="__span-0-19">
</span><span id="__span-0-20"><span class="sd">        This is a convenience class and is **not** a part of the OME-Zarr specification.</span>
</span><span id="__span-0-21">
</span><span id="__span-0-22"><span class="sd">    There are some places in the OME Zarr spec where information about a given axis must</span>
</span><span id="__span-0-23"><span class="sd">    be entered in multiple different places (e.g., `Multiscale.axes` must agree with</span>
</span><span id="__span-0-24"><span class="sd">    `Multiscale.datasets.CoordinateTransformation`, etc). `DimSpec` is a convenience</span>
</span><span id="__span-0-25"><span class="sd">    class that encapsulates all the relevant information about a single dimension in one</span>
</span><span id="__span-0-26"><span class="sd">    place, and may be used in specialized constructors (e.g. `v05.Multiscale.from_dims`)</span>
</span><span id="__span-0-27">
</span><span id="__span-0-28"><span class="sd">    Examples</span>
</span><span id="__span-0-29"><span class="sd">    --------</span>
</span><span id="__span-0-30"><span class="sd">    5D timelapse with channels:</span>
</span><span id="__span-0-31">
</span><span id="__span-0-32"><span class="sd">    ```python</span>
</span><span id="__span-0-33"><span class="sd">    from yaozarrs import DimSpec, v05</span>
</span><span id="__span-0-34">
</span><span id="__span-0-35"><span class="sd">    dims = [</span>
</span><span id="__span-0-36"><span class="sd">        DimSpec(name=&quot;t&quot;, size=100, scale=1.0, unit=&quot;second&quot;),</span>
</span><span id="__span-0-37"><span class="sd">        DimSpec(name=&quot;c&quot;, size=3),</span>
</span><span id="__span-0-38"><span class="sd">        DimSpec(name=&quot;z&quot;, size=50, scale=2.0, unit=&quot;micrometer&quot;),</span>
</span><span id="__span-0-39"><span class="sd">        DimSpec(name=&quot;y&quot;, size=512, scale=0.5, unit=&quot;micrometer&quot;),</span>
</span><span id="__span-0-40"><span class="sd">        DimSpec(name=&quot;x&quot;, size=512, scale=0.5, unit=&quot;micrometer&quot;),</span>
</span><span id="__span-0-41"><span class="sd">    ]</span>
</span><span id="__span-0-42"><span class="sd">    multiscale = v05.Multiscale.from_dims(dims, name=&quot;my_image&quot;, n_levels=3)</span>
</span><span id="__span-0-43"><span class="sd">    ```</span>
</span><span id="__span-0-44"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-45">
</span><span id="__span-0-46">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="__span-0-47">        <span class="n">description</span><span class="o">=</span><span class="p">(</span>
</span><span id="__span-0-48">            <span class="s2">&quot;The name of the dimension. Common names like &#39;x&#39;, &#39;y&#39;, &#39;z&#39; will be &quot;</span>
</span><span id="__span-0-49">            <span class="s2">&quot;inferred as spatial dimensions; &#39;t&#39; as time; &#39;c&#39; as channel.&quot;</span>
</span><span id="__span-0-50">        <span class="p">)</span>
</span><span id="__span-0-51">    <span class="p">)</span>
</span><span id="__span-0-52">    <span class="n">size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="__span-0-53">        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-54">        <span class="n">description</span><span class="o">=</span><span class="p">(</span>
</span><span id="__span-0-55">            <span class="s2">&quot;The size of the dimension (number of elements along this axis). &quot;</span>
</span><span id="__span-0-56">            <span class="s2">&quot;This is not used anywhere by the OME-Zarr spec, but is useful when &quot;</span>
</span><span id="__span-0-57">            <span class="s2">&quot;creating new empty datasets.&quot;</span>
</span><span id="__span-0-58">        <span class="p">),</span>
</span><span id="__span-0-59">    <span class="p">)</span>
</span><span id="__span-0-60">    <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="__span-0-61">        <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
</span><span id="__span-0-62">        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The scale factor for this dimension in physical units.&quot;</span><span class="p">,</span>
</span><span id="__span-0-63">    <span class="p">)</span>
</span><span id="__span-0-64">    <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="__span-0-65">        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-66">        <span class="n">description</span><span class="o">=</span><span class="p">(</span>
</span><span id="__span-0-67">            <span class="s2">&quot;The physical unit for this dimension (e.g., &#39;micrometer&#39;, &#39;second&#39;). &quot;</span>
</span><span id="__span-0-68">            <span class="s2">&quot;If not provided, no unit will be set on the axis.&quot;</span>
</span><span id="__span-0-69">        <span class="p">),</span>
</span><span id="__span-0-70">    <span class="p">)</span>
</span><span id="__span-0-71">    <span class="nb">type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;space&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;channel&quot;</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="__span-0-72">        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-73">        <span class="n">description</span><span class="o">=</span><span class="p">(</span>
</span><span id="__span-0-74">            <span class="s2">&quot;The type of axis (&#39;space&#39;, &#39;time&#39;, &#39;channel&#39;, or custom). If not &quot;</span>
</span><span id="__span-0-75">            <span class="s2">&quot;provided, will be inferred from the name: x/y/z -&gt; &#39;space&#39;, &quot;</span>
</span><span id="__span-0-76">            <span class="s2">&quot;t -&gt; &#39;time&#39;, c -&gt; &#39;channel&#39;.&quot;</span>
</span><span id="__span-0-77">        <span class="p">),</span>
</span><span id="__span-0-78">    <span class="p">)</span>
</span><span id="__span-0-79">    <span class="n">scale_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="__span-0-80">        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-81">        <span class="n">description</span><span class="o">=</span><span class="p">(</span>
</span><span id="__span-0-82">            <span class="s2">&quot;The scale factor for downsampling along this dimension at each &quot;</span>
</span><span id="__span-0-83">            <span class="s2">&quot;multiscale level. If not provided, defaults to 2.0 for spatial &quot;</span>
</span><span id="__span-0-84">            <span class="s2">&quot;dimensions (x/y/z) and 1.0 for others. To *avoid* downsampling along &quot;</span>
</span><span id="__span-0-85">            <span class="s2">&quot;the z dimension (which is inferred to be a spatial dimension), &quot;</span>
</span><span id="__span-0-86">            <span class="s2">&quot;set this explicitly to 1.0.&quot;</span>
</span><span id="__span-0-87">        <span class="p">),</span>
</span><span id="__span-0-88">    <span class="p">)</span>
</span><span id="__span-0-89">    <span class="n">translation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
</span><span id="__span-0-90">        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-0-91">        <span class="n">description</span><span class="o">=</span><span class="p">(</span>
</span><span id="__span-0-92">            <span class="s2">&quot;The translation offset for this dimension in physical units. If not &quot;</span>
</span><span id="__span-0-93">            <span class="s2">&quot;provided, no translation transform will be applied. If only some &quot;</span>
</span><span id="__span-0-94">            <span class="s2">&quot;dimensions have translation specified, all others will default to 0.0.&quot;</span>
</span><span id="__span-0-95">        <span class="p">),</span>
</span><span id="__span-0-96">    <span class="p">)</span>
</span><span id="__span-0-97">
</span><span id="__span-0-98">    <span class="k">def</span><span class="w"> </span><span class="nf">infer_scale_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="__span-0-99"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Infer the scale factor for downsampling based on dimension type.</span>
</span><span id="__span-0-100">
</span><span id="__span-0-101"><span class="sd">        !!! warning &quot;:sparkles:{ .pulse } **Magic Alert** &quot;</span>
</span><span id="__span-0-102"><span class="sd">            *By default, this downscales all spatial dimensions by 2 when creating</span>
</span><span id="__span-0-103"><span class="sd">            pyramid levels.  Explicitly set `scale_factor` to override.*</span>
</span><span id="__span-0-104">
</span><span id="__span-0-105"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-106">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-107">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span>
</span><span id="__span-0-108">        <span class="k">return</span> <span class="mf">2.0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">infer_type</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;space&quot;</span> <span class="k">else</span> <span class="mf">1.0</span>
</span><span id="__span-0-109">
</span><span id="__span-0-110">    <span class="k">def</span><span class="w"> </span><span class="nf">infer_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-111"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Infer the axis type from the dimension name.</span>
</span><span id="__span-0-112">
</span><span id="__span-0-113"><span class="sd">        !!! warning &quot;:sparkles:{ .pulse } **Magic Alert** &quot;</span>
</span><span id="__span-0-114"><span class="sd">            *This treats names of &quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;t&quot;, &quot;time&quot;, &quot;c&quot;, and &quot;channel&quot;</span>
</span><span id="__span-0-115"><span class="sd">            specially!*</span>
</span><span id="__span-0-116">
</span><span id="__span-0-117"><span class="sd">        Returns</span>
</span><span id="__span-0-118"><span class="sd">        -------</span>
</span><span id="__span-0-119"><span class="sd">        str | None</span>
</span><span id="__span-0-120"><span class="sd">            The inferred type: &#39;space&#39; for x/y/z, &#39;time&#39; for t, &#39;channel&#39; for c,</span>
</span><span id="__span-0-121"><span class="sd">            or the explicitly set type if provided.</span>
</span><span id="__span-0-122"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-123">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-124">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
</span><span id="__span-0-125">        <span class="n">name_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="__span-0-126">        <span class="k">if</span> <span class="n">name_lower</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">):</span>
</span><span id="__span-0-127">            <span class="k">return</span> <span class="s2">&quot;space&quot;</span>
</span><span id="__span-0-128">        <span class="k">if</span> <span class="n">name_lower</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">}:</span>
</span><span id="__span-0-129">            <span class="k">return</span> <span class="s2">&quot;time&quot;</span>
</span><span id="__span-0-130">        <span class="k">if</span> <span class="n">name_lower</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;channel&quot;</span><span class="p">}:</span>
</span><span id="__span-0-131">            <span class="k">return</span> <span class="s2">&quot;channel&quot;</span>
</span><span id="__span-0-132">        <span class="k">return</span> <span class="kc">None</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="yaozarrs.DimSpec.infer_scale_factor" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">infer_scale_factor</span><span class="p">()</span></code>

<a href="#yaozarrs.DimSpec.infer_scale_factor" class="headerlink" title="Link to this section">#</a></h4>


    <div class="doc doc-contents ">

        <p>Infer the scale factor for downsampling based on dimension type.</p>
<div class="admonition warning">
<p class="admonition-title"><img alt="✨" class="twemoji pulse" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2728.svg" title=":sparkles:" /> <strong>Magic Alert</strong> </p>
<p><em>By default, this downscales all spatial dimensions by 2 when creating
pyramid levels.  Explicitly set <code>scale_factor</code> to override.</em></p>
</div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_dim_spec.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-98"><span class="k">def</span><span class="w"> </span><span class="nf">infer_scale_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="__span-0-99"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Infer the scale factor for downsampling based on dimension type.</span>
</span><span id="__span-0-100">
</span><span id="__span-0-101"><span class="sd">    !!! warning &quot;:sparkles:{ .pulse } **Magic Alert** &quot;</span>
</span><span id="__span-0-102"><span class="sd">        *By default, this downscales all spatial dimensions by 2 when creating</span>
</span><span id="__span-0-103"><span class="sd">        pyramid levels.  Explicitly set `scale_factor` to override.*</span>
</span><span id="__span-0-104">
</span><span id="__span-0-105"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-106">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-107">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_factor</span>
</span><span id="__span-0-108">    <span class="k">return</span> <span class="mf">2.0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">infer_type</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;space&quot;</span> <span class="k">else</span> <span class="mf">1.0</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="yaozarrs.DimSpec.infer_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">infer_type</span><span class="p">()</span></code>

<a href="#yaozarrs.DimSpec.infer_type" class="headerlink" title="Link to this section">#</a></h4>


    <div class="doc doc-contents ">

        <p>Infer the axis type from the dimension name.</p>
<div class="admonition warning">
<p class="admonition-title"><img alt="✨" class="twemoji pulse" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@16.0.1/assets/svg/2728.svg" title=":sparkles:" /> <strong>Magic Alert</strong> </p>
<p><em>This treats names of "x", "y", "z", "t", "time", "c", and "channel"
specially!</em></p>
</div>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The inferred type: 'space' for x/y/z, 'time' for t, 'channel' for c,
or the explicitly set type if provided.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_dim_spec.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-110"><span class="k">def</span><span class="w"> </span><span class="nf">infer_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-111"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Infer the axis type from the dimension name.</span>
</span><span id="__span-0-112">
</span><span id="__span-0-113"><span class="sd">    !!! warning &quot;:sparkles:{ .pulse } **Magic Alert** &quot;</span>
</span><span id="__span-0-114"><span class="sd">        *This treats names of &quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;t&quot;, &quot;time&quot;, &quot;c&quot;, and &quot;channel&quot;</span>
</span><span id="__span-0-115"><span class="sd">        specially!*</span>
</span><span id="__span-0-116">
</span><span id="__span-0-117"><span class="sd">    Returns</span>
</span><span id="__span-0-118"><span class="sd">    -------</span>
</span><span id="__span-0-119"><span class="sd">    str | None</span>
</span><span id="__span-0-120"><span class="sd">        The inferred type: &#39;space&#39; for x/y/z, &#39;time&#39; for t, &#39;channel&#39; for c,</span>
</span><span id="__span-0-121"><span class="sd">        or the explicitly set type if provided.</span>
</span><span id="__span-0-122"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-123">    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-124">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
</span><span id="__span-0-125">    <span class="n">name_lower</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="__span-0-126">    <span class="k">if</span> <span class="n">name_lower</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">):</span>
</span><span id="__span-0-127">        <span class="k">return</span> <span class="s2">&quot;space&quot;</span>
</span><span id="__span-0-128">    <span class="k">if</span> <span class="n">name_lower</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">}:</span>
</span><span id="__span-0-129">        <span class="k">return</span> <span class="s2">&quot;time&quot;</span>
</span><span id="__span-0-130">    <span class="k">if</span> <span class="n">name_lower</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;channel&quot;</span><span class="p">}:</span>
</span><span id="__span-0-131">        <span class="k">return</span> <span class="s2">&quot;channel&quot;</span>
</span><span id="__span-0-132">    <span class="k">return</span> <span class="kc">None</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="yaozarrs.ZarrGroup" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>ZarrGroup</code>


<a href="#yaozarrs.ZarrGroup" class="headerlink" title="Link to this section">#</a></h3>


    <div class="doc doc-contents ">



        <p>Minimal wrapper around a zarr v2/v3 group.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Requires <code>yaozarrs[io]</code> or <code>fsspec</code> to be installed.</p>
</div>
<p>This class exists to provide minimal zarr group functionality, needed for hierarchy
traversal and structural validation, without requiring a dependency on a full blown
zarr array-writing library (which come with heavier dependencies, and python version
limitations).</p>
<p>Matches <code>zarr-python</code> behavior: expects all children to be the same
zarr_format version as the parent. Does not support mixed hierarchies.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;ome_version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.ZarrGroup.ome_version&lt;/code&gt;)" href="#yaozarrs.ZarrGroup.ome_version">ome_version</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Return ome_version if present, else None.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.ZarrGroup.validate&lt;/code&gt;)" href="#yaozarrs.ZarrGroup.validate">validate</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Validate the zarr group structure.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;node_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-classmethod&quot;&gt;&lt;code&gt;classmethod&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;yaozarrs.ZarrGroup.node_type&lt;/code&gt;)" href="#yaozarrs.ZarrGroup.node_type">node_type</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Return the node type (group or array).</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;prefetch_children&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;child_keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.ZarrGroup.prefetch_children&lt;/code&gt;)" href="#yaozarrs.ZarrGroup.prefetch_children">prefetch_children</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Prefetch metadata for multiple children using async batch fetching.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.ZarrGroup.get&lt;/code&gt;)" href="#yaozarrs.ZarrGroup.get">get</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Get a child node (group or array), or return default if not found.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-method&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;to_zarr_python&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt; (&lt;code&gt;yaozarrs.ZarrGroup.to_zarr_python&lt;/code&gt;)" href="#yaozarrs.ZarrGroup.to_zarr_python">to_zarr_python</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Convert to a zarr-python Group object (requires <code>zarr-python</code>).</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>



              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/yaozarrs/_zarr.py</code></summary>
                <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-542"><span class="k">class</span><span class="w"> </span><span class="nc">ZarrGroup</span><span class="p">(</span><span class="n">ZarrNode</span><span class="p">):</span>
</span><span id="__span-0-543"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Minimal wrapper around a zarr v2/v3 group.</span>
</span><span id="__span-0-544">
</span><span id="__span-0-545"><span class="sd">    !!!important</span>
</span><span id="__span-0-546"><span class="sd">        Requires `yaozarrs[io]` or `fsspec` to be installed.</span>
</span><span id="__span-0-547">
</span><span id="__span-0-548"><span class="sd">    This class exists to provide minimal zarr group functionality, needed for hierarchy</span>
</span><span id="__span-0-549"><span class="sd">    traversal and structural validation, without requiring a dependency on a full blown</span>
</span><span id="__span-0-550"><span class="sd">    zarr array-writing library (which come with heavier dependencies, and python version</span>
</span><span id="__span-0-551"><span class="sd">    limitations).</span>
</span><span id="__span-0-552">
</span><span id="__span-0-553"><span class="sd">    Matches `zarr-python` behavior: expects all children to be the same</span>
</span><span id="__span-0-554"><span class="sd">    zarr_format version as the parent. Does not support mixed hierarchies.</span>
</span><span id="__span-0-555"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-556">
</span><span id="__span-0-557">    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_ome_metadata&quot;</span><span class="p">,)</span>
</span><span id="__span-0-558">
</span><span id="__span-0-559">    <span class="k">def</span><span class="w"> </span><span class="nf">ome_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-560"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return ome_version if present, else None.</span>
</span><span id="__span-0-561">
</span><span id="__span-0-562"><span class="sd">        Attempt to determine version as minimally as possible without</span>
</span><span id="__span-0-563"><span class="sd">        parsing full models.</span>
</span><span id="__span-0-564"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-565">        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">attributes</span>
</span><span id="__span-0-566">        <span class="k">if</span> <span class="s2">&quot;ome&quot;</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
</span><span id="__span-0-567">            <span class="k">if</span> <span class="s2">&quot;version&quot;</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;ome&quot;</span><span class="p">]:</span>
</span><span id="__span-0-568">                <span class="k">return</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;ome&quot;</span><span class="p">][</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
</span><span id="__span-0-569">        <span class="c1"># TODO: this is probably flaky</span>
</span><span id="__span-0-570">        <span class="k">if</span> <span class="n">ms</span> <span class="o">:=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;multiscales&quot;</span><span class="p">):</span>
</span><span id="__span-0-571">            <span class="k">return</span> <span class="n">ms</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
</span><span id="__span-0-572">        <span class="k">if</span> <span class="n">plate</span> <span class="o">:=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;plate&quot;</span><span class="p">):</span>
</span><span id="__span-0-573">            <span class="k">return</span> <span class="n">plate</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
</span><span id="__span-0-574">        <span class="k">if</span> <span class="s2">&quot;bioformats2raw.layout&quot;</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
</span><span id="__span-0-575">            <span class="k">if</span> <span class="s2">&quot;0&quot;</span> <span class="ow">in</span> <span class="bp">self</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">group</span> <span class="o">:=</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;0&quot;</span><span class="p">],</span> <span class="n">ZarrGroup</span><span class="p">):</span>
</span><span id="__span-0-576">                <span class="k">return</span> <span class="n">group</span><span class="o">.</span><span class="n">ome_version</span><span class="p">()</span>
</span><span id="__span-0-577">        <span class="k">return</span> <span class="kc">None</span>
</span><span id="__span-0-578">
</span><span id="__span-0-579">    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-0-580"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the zarr group structure.</span>
</span><span id="__span-0-581">
</span><span id="__span-0-582"><span class="sd">        This is a convenience method that calls [`yaozarrs.validate_zarr_store`][]</span>
</span><span id="__span-0-583"><span class="sd">        on this group.</span>
</span><span id="__span-0-584">
</span><span id="__span-0-585"><span class="sd">        Raises</span>
</span><span id="__span-0-586"><span class="sd">        ------</span>
</span><span id="__span-0-587"><span class="sd">        StorageValidationError</span>
</span><span id="__span-0-588"><span class="sd">            If the storage structure is invalid.</span>
</span><span id="__span-0-589"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-590">        <span class="kn">from</span><span class="w"> </span><span class="nn">yaozarrs._storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_zarr_store</span>
</span><span id="__span-0-591">
</span><span id="__span-0-592">        <span class="n">validate_zarr_store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="__span-0-593">        <span class="k">return</span> <span class="bp">self</span>
</span><span id="__span-0-594">
</span><span id="__span-0-595">    <span class="k">def</span><span class="w"> </span><span class="nf">ome_metadata</span><span class="p">(</span>
</span><span id="__span-0-596">        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-597">    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v05</span><span class="o">.</span><span class="n">OMEMetadata</span> <span class="o">|</span> <span class="n">v04</span><span class="o">.</span><span class="n">OMEZarrGroupJSON</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-598">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_ome_metadata&quot;</span><span class="p">):</span>
</span><span id="__span-0-599">            <span class="n">meta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span>
</span><span id="__span-0-600">            <span class="bp">self</span><span class="o">.</span><span class="n">_ome_metadata</span> <span class="o">=</span> <span class="n">meta</span><span class="o">.</span><span class="n">ome_metadata</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">)</span>
</span><span id="__span-0-601">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ome_metadata</span>
</span><span id="__span-0-602">
</span><span id="__span-0-603">    <span class="nd">@classmethod</span>
</span><span id="__span-0-604">    <span class="k">def</span><span class="w"> </span><span class="nf">node_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;group&quot;</span><span class="p">]:</span>
</span><span id="__span-0-605"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the node type (group or array).&quot;&quot;&quot;</span>
</span><span id="__span-0-606">        <span class="k">return</span> <span class="s2">&quot;group&quot;</span>
</span><span id="__span-0-607">
</span><span id="__span-0-608">    <span class="k">def</span><span class="w"> </span><span class="nf">prefetch_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_keys</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-609"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prefetch metadata for multiple children using async batch fetching.</span>
</span><span id="__span-0-610">
</span><span id="__span-0-611"><span class="sd">        For HTTPS URIs, this triggers fsspec&#39;s async batch fetching which uses</span>
</span><span id="__span-0-612"><span class="sd">        aiohttp to fetch up to 1280 files concurrently. Results are cached in</span>
</span><span id="__span-0-613"><span class="sd">        the _CachedMapper for subsequent access.</span>
</span><span id="__span-0-614">
</span><span id="__span-0-615"><span class="sd">        This is critical for performance with remote stores - a 384-well plate</span>
</span><span id="__span-0-616"><span class="sd">        can have 2000+ metadata files. Without batching, sequential fetches would</span>
</span><span id="__span-0-617"><span class="sd">        take 10+ minutes; with batching, validation completes in ~80 seconds.</span>
</span><span id="__span-0-618">
</span><span id="__span-0-619"><span class="sd">        Parameters</span>
</span><span id="__span-0-620"><span class="sd">        ----------</span>
</span><span id="__span-0-621"><span class="sd">        child_keys : list[str]</span>
</span><span id="__span-0-622"><span class="sd">            List of child keys to prefetch.</span>
</span><span id="__span-0-623"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-0-624">        <span class="c1"># Build list of metadata file paths to fetch</span>
</span><span id="__span-0-625">        <span class="n">metadata_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-626">        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">child_keys</span><span class="p">:</span>
</span><span id="__span-0-627">            <span class="n">child_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="k">else</span> <span class="n">key</span>
</span><span id="__span-0-628">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">zarr_format</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="__span-0-629">                <span class="n">metadata_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/zarr.json&quot;</span><span class="p">)</span>
</span><span id="__span-0-630">            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-631">                <span class="c1"># For v2, we need to check .zgroup, .zarray, AND .zattrs</span>
</span><span id="__span-0-632">                <span class="c1"># The .zattrs file contains OME metadata and must be prefetched</span>
</span><span id="__span-0-633">                <span class="c1"># to avoid individual HTTP requests when loading group metadata</span>
</span><span id="__span-0-634">                <span class="n">metadata_paths</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="__span-0-635">                    <span class="p">[</span>
</span><span id="__span-0-636">                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/.zgroup&quot;</span><span class="p">,</span>
</span><span id="__span-0-637">                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/.zarray&quot;</span><span class="p">,</span>
</span><span id="__span-0-638">                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/.zattrs&quot;</span><span class="p">,</span>
</span><span id="__span-0-639">                    <span class="p">]</span>
</span><span id="__span-0-640">                <span class="p">)</span>
</span><span id="__span-0-641">
</span><span id="__span-0-642">        <span class="c1"># Batch fetch using getitems - _CachedMapper handles fallback if needed</span>
</span><span id="__span-0-643">        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-644">            <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">getitems</span><span class="p">(</span><span class="n">metadata_paths</span><span class="p">)</span>
</span><span id="__span-0-645">        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="__span-0-646">            <span class="c1"># If batch fetching fails, _CachedMapper will fall back to sequential</span>
</span><span id="__span-0-647">            <span class="c1"># access when files are actually requested via __getitem__</span>
</span><span id="__span-0-648">            <span class="k">pass</span>
</span><span id="__span-0-649">
</span><span id="__span-0-650">    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="__span-0-651"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if a child node exists.&quot;&quot;&quot;</span>
</span><span id="__span-0-652">        <span class="n">child_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="k">else</span> <span class="n">key</span>
</span><span id="__span-0-653">
</span><span id="__span-0-654">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">zarr_format</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="__span-0-655">            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/zarr.json&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span>
</span><span id="__span-0-656">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-657">            <span class="k">return</span> <span class="p">(</span>
</span><span id="__span-0-658">                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/.zgroup&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span>
</span><span id="__span-0-659">                <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/.zarray&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span>
</span><span id="__span-0-660">            <span class="p">)</span>
</span><span id="__span-0-661">
</span><span id="__span-0-662">    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZarrGroup</span> <span class="o">|</span> <span class="n">ZarrArray</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-663"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a child node (group or array), or return default if not found.&quot;&quot;&quot;</span>
</span><span id="__span-0-664">        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-665">            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="__span-0-666">        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="__span-0-667">            <span class="k">return</span> <span class="n">default</span>
</span><span id="__span-0-668">
</span><span id="__span-0-669">    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZarrGroup</span> <span class="o">|</span> <span class="n">ZarrArray</span><span class="p">:</span>
</span><span id="__span-0-670"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a child node (group or array).&quot;&quot;&quot;</span>
</span><span id="__span-0-671">        <span class="n">child_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="k">else</span> <span class="n">key</span>
</span><span id="__span-0-672">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">zarr_format</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="__span-0-673">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_v3</span><span class="p">(</span><span class="n">child_path</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="__span-0-674">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-675">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_v2</span><span class="p">(</span><span class="n">child_path</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span id="__span-0-676">
</span><span id="__span-0-677">    <span class="k">def</span><span class="w"> </span><span class="nf">_getitem_v3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZarrGroup</span> <span class="o">|</span> <span class="n">ZarrArray</span><span class="p">:</span>
</span><span id="__span-0-678"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a v3 child node.&quot;&quot;&quot;</span>
</span><span id="__span-0-679">        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/&quot;</span>
</span><span id="__span-0-680">        <span class="k">if</span> <span class="p">(</span><span class="n">meta</span> <span class="o">:=</span> <span class="n">_load_zarr_json</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-681">            <span class="k">if</span> <span class="n">meta</span><span class="o">.</span><span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;group&quot;</span><span class="p">:</span>
</span><span id="__span-0-682">                <span class="k">return</span> <span class="n">ZarrGroup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="p">,</span> <span class="n">child_path</span><span class="p">,</span> <span class="n">meta</span><span class="p">)</span>
</span><span id="__span-0-683">            <span class="k">elif</span> <span class="n">meta</span><span class="o">.</span><span class="n">node_type</span> <span class="o">==</span> <span class="s2">&quot;array&quot;</span><span class="p">:</span>
</span><span id="__span-0-684">                <span class="k">return</span> <span class="n">ZarrArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="p">,</span> <span class="n">child_path</span><span class="p">,</span> <span class="n">meta</span><span class="p">)</span>
</span><span id="__span-0-685">            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
</span><span id="__span-0-686">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown node_type: </span><span class="si">{</span><span class="n">meta</span><span class="o">.</span><span class="n">node_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-687">
</span><span id="__span-0-688">        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="__span-0-689">
</span><span id="__span-0-690">    <span class="k">def</span><span class="w"> </span><span class="nf">_getitem_v2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZarrGroup</span> <span class="o">|</span> <span class="n">ZarrArray</span><span class="p">:</span>
</span><span id="__span-0-691"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a v2 child node.&quot;&quot;&quot;</span>
</span><span id="__span-0-692">        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/&quot;</span>
</span><span id="__span-0-693">        <span class="c1"># Try group</span>
</span><span id="__span-0-694">        <span class="k">if</span> <span class="p">(</span><span class="n">meta</span> <span class="o">:=</span> <span class="n">_load_zgroup</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-695">            <span class="k">return</span> <span class="n">ZarrGroup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="p">,</span> <span class="n">child_path</span><span class="p">,</span> <span class="n">meta</span><span class="p">)</span>
</span><span id="__span-0-696">
</span><span id="__span-0-697">        <span class="k">if</span> <span class="p">(</span><span class="n">meta</span> <span class="o">:=</span> <span class="n">_load_zarray</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-698">            <span class="k">return</span> <span class="n">ZarrArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="p">,</span> <span class="n">child_path</span><span class="p">,</span> <span class="n">meta</span><span class="p">)</span>
</span><span id="__span-0-699">
</span><span id="__span-0-700">        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="__span-0-701">
</span><span id="__span-0-702">    <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
</span><span id="__span-0-703">
</span><span id="__span-0-704">        <span class="k">def</span><span class="w"> </span><span class="nf">to_zarr_python</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">zarr</span><span class="o">.</span><span class="n">Group</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
</span><span id="__span-0-705"><span class="w">            </span><span class="sd">&quot;&quot;&quot;Convert to a zarr-python Group object (requires `zarr-python`).&quot;&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="yaozarrs.ZarrGroup.ome_version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">ome_version</span><span class="p">()</span></code>

<a href="#yaozarrs.ZarrGroup.ome_version" class="headerlink" title="Link to this section">#</a></h4>


    <div class="doc doc-contents ">

        <p>Return ome_version if present, else None.</p>
<p>Attempt to determine version as minimally as possible without
parsing full models.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_zarr.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-559"><span class="k">def</span><span class="w"> </span><span class="nf">ome_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-560"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return ome_version if present, else None.</span>
</span><span id="__span-0-561">
</span><span id="__span-0-562"><span class="sd">    Attempt to determine version as minimally as possible without</span>
</span><span id="__span-0-563"><span class="sd">    parsing full models.</span>
</span><span id="__span-0-564"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-565">    <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">attributes</span>
</span><span id="__span-0-566">    <span class="k">if</span> <span class="s2">&quot;ome&quot;</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
</span><span id="__span-0-567">        <span class="k">if</span> <span class="s2">&quot;version&quot;</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;ome&quot;</span><span class="p">]:</span>
</span><span id="__span-0-568">            <span class="k">return</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;ome&quot;</span><span class="p">][</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
</span><span id="__span-0-569">    <span class="c1"># TODO: this is probably flaky</span>
</span><span id="__span-0-570">    <span class="k">if</span> <span class="n">ms</span> <span class="o">:=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;multiscales&quot;</span><span class="p">):</span>
</span><span id="__span-0-571">        <span class="k">return</span> <span class="n">ms</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
</span><span id="__span-0-572">    <span class="k">if</span> <span class="n">plate</span> <span class="o">:=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;plate&quot;</span><span class="p">):</span>
</span><span id="__span-0-573">        <span class="k">return</span> <span class="n">plate</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span>
</span><span id="__span-0-574">    <span class="k">if</span> <span class="s2">&quot;bioformats2raw.layout&quot;</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
</span><span id="__span-0-575">        <span class="k">if</span> <span class="s2">&quot;0&quot;</span> <span class="ow">in</span> <span class="bp">self</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">group</span> <span class="o">:=</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;0&quot;</span><span class="p">],</span> <span class="n">ZarrGroup</span><span class="p">):</span>
</span><span id="__span-0-576">            <span class="k">return</span> <span class="n">group</span><span class="o">.</span><span class="n">ome_version</span><span class="p">()</span>
</span><span id="__span-0-577">    <span class="k">return</span> <span class="kc">None</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="yaozarrs.ZarrGroup.validate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">validate</span><span class="p">()</span></code>

<a href="#yaozarrs.ZarrGroup.validate" class="headerlink" title="Link to this section">#</a></h4>


    <div class="doc doc-contents ">

        <p>Validate the zarr group structure.</p>
<p>This is a convenience method that calls <a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-function&quot;&gt;&lt;/code&gt;            &lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;validate_zarr_store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;" href="#yaozarrs.validate_zarr_store"><code>yaozarrs.validate_zarr_store</code></a>
on this group.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="StorageValidationError">StorageValidationError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the storage structure is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_zarr.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-579"><span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-0-580"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate the zarr group structure.</span>
</span><span id="__span-0-581">
</span><span id="__span-0-582"><span class="sd">    This is a convenience method that calls [`yaozarrs.validate_zarr_store`][]</span>
</span><span id="__span-0-583"><span class="sd">    on this group.</span>
</span><span id="__span-0-584">
</span><span id="__span-0-585"><span class="sd">    Raises</span>
</span><span id="__span-0-586"><span class="sd">    ------</span>
</span><span id="__span-0-587"><span class="sd">    StorageValidationError</span>
</span><span id="__span-0-588"><span class="sd">        If the storage structure is invalid.</span>
</span><span id="__span-0-589"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-590">    <span class="kn">from</span><span class="w"> </span><span class="nn">yaozarrs._storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate_zarr_store</span>
</span><span id="__span-0-591">
</span><span id="__span-0-592">    <span class="n">validate_zarr_store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="__span-0-593">    <span class="k">return</span> <span class="bp">self</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="yaozarrs.ZarrGroup.node_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">node_type</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#yaozarrs.ZarrGroup.node_type" class="headerlink" title="Link to this section">#</a></h4>


    <div class="doc doc-contents ">

        <p>Return the node type (group or array).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_zarr.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-603"><span class="nd">@classmethod</span>
</span><span id="__span-0-604"><span class="k">def</span><span class="w"> </span><span class="nf">node_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;group&quot;</span><span class="p">]:</span>
</span><span id="__span-0-605"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the node type (group or array).&quot;&quot;&quot;</span>
</span><span id="__span-0-606">    <span class="k">return</span> <span class="s2">&quot;group&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="yaozarrs.ZarrGroup.prefetch_children" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">prefetch_children</span><span class="p">(</span><span class="n">child_keys</span><span class="p">)</span></code>

<a href="#yaozarrs.ZarrGroup.prefetch_children" class="headerlink" title="Link to this section">#</a></h4>


    <div class="doc doc-contents ">

        <p>Prefetch metadata for multiple children using async batch fetching.</p>
<p>For HTTPS URIs, this triggers fsspec's async batch fetching which uses
aiohttp to fetch up to 1280 files concurrently. Results are cached in
the _CachedMapper for subsequent access.</p>
<p>This is critical for performance with remote stores - a 384-well plate
can have 2000+ metadata files. Without batching, sequential fetches would
take 10+ minutes; with batching, validation completes in ~80 seconds.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>child_keys</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of child keys to prefetch.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_zarr.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-608"><span class="k">def</span><span class="w"> </span><span class="nf">prefetch_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_keys</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-609"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Prefetch metadata for multiple children using async batch fetching.</span>
</span><span id="__span-0-610">
</span><span id="__span-0-611"><span class="sd">    For HTTPS URIs, this triggers fsspec&#39;s async batch fetching which uses</span>
</span><span id="__span-0-612"><span class="sd">    aiohttp to fetch up to 1280 files concurrently. Results are cached in</span>
</span><span id="__span-0-613"><span class="sd">    the _CachedMapper for subsequent access.</span>
</span><span id="__span-0-614">
</span><span id="__span-0-615"><span class="sd">    This is critical for performance with remote stores - a 384-well plate</span>
</span><span id="__span-0-616"><span class="sd">    can have 2000+ metadata files. Without batching, sequential fetches would</span>
</span><span id="__span-0-617"><span class="sd">    take 10+ minutes; with batching, validation completes in ~80 seconds.</span>
</span><span id="__span-0-618">
</span><span id="__span-0-619"><span class="sd">    Parameters</span>
</span><span id="__span-0-620"><span class="sd">    ----------</span>
</span><span id="__span-0-621"><span class="sd">    child_keys : list[str]</span>
</span><span id="__span-0-622"><span class="sd">        List of child keys to prefetch.</span>
</span><span id="__span-0-623"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-624">    <span class="c1"># Build list of metadata file paths to fetch</span>
</span><span id="__span-0-625">    <span class="n">metadata_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-0-626">    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">child_keys</span><span class="p">:</span>
</span><span id="__span-0-627">        <span class="n">child_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="k">else</span> <span class="n">key</span>
</span><span id="__span-0-628">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">zarr_format</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="__span-0-629">            <span class="n">metadata_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/zarr.json&quot;</span><span class="p">)</span>
</span><span id="__span-0-630">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-631">            <span class="c1"># For v2, we need to check .zgroup, .zarray, AND .zattrs</span>
</span><span id="__span-0-632">            <span class="c1"># The .zattrs file contains OME metadata and must be prefetched</span>
</span><span id="__span-0-633">            <span class="c1"># to avoid individual HTTP requests when loading group metadata</span>
</span><span id="__span-0-634">            <span class="n">metadata_paths</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="__span-0-635">                <span class="p">[</span>
</span><span id="__span-0-636">                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/.zgroup&quot;</span><span class="p">,</span>
</span><span id="__span-0-637">                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/.zarray&quot;</span><span class="p">,</span>
</span><span id="__span-0-638">                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">child_path</span><span class="si">}</span><span class="s2">/.zattrs&quot;</span><span class="p">,</span>
</span><span id="__span-0-639">                <span class="p">]</span>
</span><span id="__span-0-640">            <span class="p">)</span>
</span><span id="__span-0-641">
</span><span id="__span-0-642">    <span class="c1"># Batch fetch using getitems - _CachedMapper handles fallback if needed</span>
</span><span id="__span-0-643">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-644">        <span class="bp">self</span><span class="o">.</span><span class="n">_store</span><span class="o">.</span><span class="n">getitems</span><span class="p">(</span><span class="n">metadata_paths</span><span class="p">)</span>
</span><span id="__span-0-645">    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span><span id="__span-0-646">        <span class="c1"># If batch fetching fails, _CachedMapper will fall back to sequential</span>
</span><span id="__span-0-647">        <span class="c1"># access when files are actually requested via __getitem__</span>
</span><span id="__span-0-648">        <span class="k">pass</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="yaozarrs.ZarrGroup.get" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#yaozarrs.ZarrGroup.get" class="headerlink" title="Link to this section">#</a></h4>


    <div class="doc doc-contents ">

        <p>Get a child node (group or array), or return default if not found.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_zarr.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-662"><span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZarrGroup</span> <span class="o">|</span> <span class="n">ZarrArray</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-663"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a child node (group or array), or return default if not found.&quot;&quot;&quot;</span>
</span><span id="__span-0-664">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-665">        <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="__span-0-666">    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span id="__span-0-667">        <span class="k">return</span> <span class="n">default</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="yaozarrs.ZarrGroup.to_zarr_python" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">to_zarr_python</span><span class="p">()</span></code>

<a href="#yaozarrs.ZarrGroup.to_zarr_python" class="headerlink" title="Link to this section">#</a></h4>


    <div class="doc doc-contents ">

        <p>Convert to a zarr-python Group object (requires <code>zarr-python</code>).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_zarr.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">704</span>
<span class="normal">705</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-704"><span class="k">def</span><span class="w"> </span><span class="nf">to_zarr_python</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">zarr</span><span class="o">.</span><span class="n">Group</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
</span><span id="__span-0-705"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert to a zarr-python Group object (requires `zarr-python`).&quot;&quot;&quot;</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="yaozarrs.open_group" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">open_group</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">storage_options</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#yaozarrs.open_group" class="headerlink" title="Link to this section">#</a></h3>


    <div class="doc doc-contents ">

        <p>Open a zarr v2/v3 group from a URI.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Requires <code>yaozarrs[io]</code> or <code>fsspec</code> to be installed.</p>
</div>
<p>Returns a small wrapper around the zarr group URI that allows
reading metadata and traversing the hierarchy.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>uri</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="os.PathLike">PathLike</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URI of the zarr store (e.g., "https://...", "s3://...", "/path/to/file"),
or a zarr-python Group.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>storage_options</code>
            </td>
            <td>
                  <code><span title="dict">dict</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional storage options to pass to fsspec when opening the mapper.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;code&gt;ZarrGroup&lt;/code&gt; (&lt;code&gt;yaozarrs._zarr.ZarrGroup&lt;/code&gt;)" href="#yaozarrs.ZarrGroup">ZarrGroup</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opened zarr group with caching enabled.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="FileNotFoundError">FileNotFoundError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no zarr metadata is found at the specified URI.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the metadata is invalid or inconsistent, or if the root node is not a group.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_zarr.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-755"><span class="k">def</span><span class="w"> </span><span class="nf">open_group</span><span class="p">(</span>
</span><span id="__span-0-756">    <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span> <span class="o">|</span> <span class="n">Any</span><span class="p">,</span> <span class="n">storage_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-757"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZarrGroup</span><span class="p">:</span>
</span><span id="__span-0-758"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Open a zarr v2/v3 group from a URI.</span>
</span><span id="__span-0-759">
</span><span id="__span-0-760"><span class="sd">    !!!important</span>
</span><span id="__span-0-761"><span class="sd">        Requires `yaozarrs[io]` or `fsspec` to be installed.</span>
</span><span id="__span-0-762">
</span><span id="__span-0-763"><span class="sd">    Returns a small wrapper around the zarr group URI that allows</span>
</span><span id="__span-0-764"><span class="sd">    reading metadata and traversing the hierarchy.</span>
</span><span id="__span-0-765">
</span><span id="__span-0-766"><span class="sd">    Parameters</span>
</span><span id="__span-0-767"><span class="sd">    ----------</span>
</span><span id="__span-0-768"><span class="sd">    uri : str | os.PathLike</span>
</span><span id="__span-0-769"><span class="sd">        The URI of the zarr store (e.g., &quot;https://...&quot;, &quot;s3://...&quot;, &quot;/path/to/file&quot;),</span>
</span><span id="__span-0-770"><span class="sd">        or a zarr-python Group.</span>
</span><span id="__span-0-771"><span class="sd">    storage_options : dict | None</span>
</span><span id="__span-0-772"><span class="sd">        Additional storage options to pass to fsspec when opening the mapper.</span>
</span><span id="__span-0-773">
</span><span id="__span-0-774"><span class="sd">    Returns</span>
</span><span id="__span-0-775"><span class="sd">    -------</span>
</span><span id="__span-0-776"><span class="sd">    ZarrGroup</span>
</span><span id="__span-0-777"><span class="sd">        The opened zarr group with caching enabled.</span>
</span><span id="__span-0-778">
</span><span id="__span-0-779"><span class="sd">    Raises</span>
</span><span id="__span-0-780"><span class="sd">    ------</span>
</span><span id="__span-0-781"><span class="sd">    FileNotFoundError</span>
</span><span id="__span-0-782"><span class="sd">        If no zarr metadata is found at the specified URI.</span>
</span><span id="__span-0-783"><span class="sd">    ValueError</span>
</span><span id="__span-0-784"><span class="sd">        If the metadata is invalid or inconsistent, or if the root node is not a group.</span>
</span><span id="__span-0-785"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-786">    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-787">        <span class="kn">from</span><span class="w"> </span><span class="nn">fsspec</span><span class="w"> </span><span class="kn">import</span> <span class="n">FSMap</span><span class="p">,</span> <span class="n">get_mapper</span>
</span><span id="__span-0-788">    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-0-789">        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
</span><span id="__span-0-790">            <span class="s2">&quot;fsspec package is required for open_group().  &quot;</span>
</span><span id="__span-0-791">            <span class="s2">&quot;Please install with `pip install yaozarrs[io]` or &quot;</span>
</span><span id="__span-0-792">            <span class="s2">&quot;`pip install fsspec`.&quot;</span>
</span><span id="__span-0-793">        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
</span><span id="__span-0-794">
</span><span id="__span-0-795">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">ZarrGroup</span><span class="p">):</span>
</span><span id="__span-0-796">        <span class="k">return</span> <span class="n">uri</span>
</span><span id="__span-0-797">
</span><span id="__span-0-798">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">)):</span>
</span><span id="__span-0-799">        <span class="n">uri</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">fspath</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
</span><span id="__span-0-800">    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="s2">&quot;store&quot;</span><span class="p">):</span>
</span><span id="__span-0-801">        <span class="c1"># Handle both zarr v2 and v3 Group objects</span>
</span><span id="__span-0-802">        <span class="c1"># v3: str(group.store) returns a URI like &quot;file:///path&quot;</span>
</span><span id="__span-0-803">        <span class="c1"># v2: group.store.path returns the directory path</span>
</span><span id="__span-0-804">        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">):</span>
</span><span id="__span-0-805">            <span class="c1"># Zarr v2: DirectoryStore has .path attribute</span>
</span><span id="__span-0-806">            <span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">path</span>
</span><span id="__span-0-807">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-808">            <span class="c1"># Zarr v3: LocalStore&#39;s __str__ returns URI</span>
</span><span id="__span-0-809">            <span class="n">uri</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="n">store</span><span class="p">)</span>
</span><span id="__span-0-810">    <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
</span><span id="__span-0-811">        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="__span-0-812">            <span class="s2">&quot;uri must be a string, os.PathLike, or have a &#39;store&#39; attribute&quot;</span>
</span><span id="__span-0-813">        <span class="p">)</span>
</span><span id="__span-0-814">
</span><span id="__span-0-815">    <span class="n">storage_options</span> <span class="o">=</span> <span class="n">storage_options</span> <span class="ow">or</span> <span class="p">{}</span>
</span><span id="__span-0-816">    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;s3://&quot;</span><span class="p">):</span>
</span><span id="__span-0-817">        <span class="n">storage_options</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;anon&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-818">    <span class="n">mapper</span> <span class="o">=</span> <span class="n">get_mapper</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="o">**</span><span class="n">storage_options</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</span><span id="__span-0-819">
</span><span id="__span-0-820">    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mapper</span><span class="p">,</span> <span class="n">FSMap</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
</span><span id="__span-0-821">        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected FSMap from get_mapper, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-0-822">
</span><span id="__span-0-823">    <span class="c1"># Wrap in caching layer for metadata-level caching</span>
</span><span id="__span-0-824">    <span class="n">cached_mapper</span> <span class="o">=</span> <span class="n">_CachedMapper</span><span class="p">(</span><span class="n">mapper</span><span class="p">)</span>
</span><span id="__span-0-825">    <span class="n">node</span> <span class="o">=</span> <span class="n">ZarrNode</span><span class="p">(</span><span class="n">cached_mapper</span><span class="p">)</span>
</span><span id="__span-0-826">
</span><span id="__span-0-827">    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">node_type</span> <span class="o">!=</span> <span class="s2">&quot;group&quot;</span><span class="p">:</span>
</span><span id="__span-0-828">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="__span-0-829">            <span class="sa">f</span><span class="s2">&quot;Expected root node to be &#39;group&#39;, got &#39;</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">node_type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span id="__span-0-830">        <span class="p">)</span>
</span><span id="__span-0-831">    <span class="k">return</span> <span class="n">ZarrGroup</span><span class="p">(</span><span class="n">cached_mapper</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">_metadata</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="yaozarrs.validate_ome_json" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">validate_ome_json</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#yaozarrs.validate_ome_json" class="headerlink" title="Link to this section">#</a></h3>
          <div class="doc-overloads">
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">validate_ome_json</span><span class="p">(</span>
</span><span id="__span-0-2">    <span class="n">data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">bytearray</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>
</span><span id="__span-0-3"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span>
</span></code></pre></div><div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">validate_ome_json</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">bytearray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyOME</span>
</span></code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Validate any ome-zarr JSON string or bytes literal.</p>
<p>By default, this will validate <code>data</code> against all known OME JSON documents.
This includes ome-zarr group documents for v04 (found at .zattrs in the zarr group)
and v05 (found at zarr.json in the zarr group).  For v05 objects, it also detects
data that would valid as the value of the <code>data["attributes"]["ome"]</code> key inside
a v05 zarr.json document.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="bytes">bytes</span> | <span title="bytearray">bytearray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The OMENode instance to validate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cls</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<span title="yaozarrs._validate.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class to validate against. Must be a subclass of <code>BaseModel</code>.
If not provided, defaults to <code>OMENode</code>, meaning any valid OME node object</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>object</code></td>            <td>
                  <code><span title="yaozarrs._validate.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The validated (pydantic) model instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pydantic.ValidationError">ValidationError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the validation fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_validate.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-46"><span class="k">def</span><span class="w"> </span><span class="nf">validate_ome_json</span><span class="p">(</span>
</span><span id="__span-0-47">    <span class="n">data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">bytearray</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-48"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="o">|</span> <span class="n">AnyOME</span><span class="p">:</span>
</span><span id="__span-0-49"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate any ome-zarr JSON string or bytes literal.</span>
</span><span id="__span-0-50">
</span><span id="__span-0-51"><span class="sd">    By default, this will validate `data` against all known OME JSON documents.</span>
</span><span id="__span-0-52"><span class="sd">    This includes ome-zarr group documents for v04 (found at .zattrs in the zarr group)</span>
</span><span id="__span-0-53"><span class="sd">    and v05 (found at zarr.json in the zarr group).  For v05 objects, it also detects</span>
</span><span id="__span-0-54"><span class="sd">    data that would valid as the value of the `data[&quot;attributes&quot;][&quot;ome&quot;]` key inside</span>
</span><span id="__span-0-55"><span class="sd">    a v05 zarr.json document.</span>
</span><span id="__span-0-56">
</span><span id="__span-0-57"><span class="sd">    Parameters</span>
</span><span id="__span-0-58"><span class="sd">    ----------</span>
</span><span id="__span-0-59"><span class="sd">    data : str | bytes | bytearray</span>
</span><span id="__span-0-60"><span class="sd">        The OMENode instance to validate.</span>
</span><span id="__span-0-61"><span class="sd">    cls : type[T]</span>
</span><span id="__span-0-62"><span class="sd">        The class to validate against. Must be a subclass of `BaseModel`.</span>
</span><span id="__span-0-63"><span class="sd">        If not provided, defaults to `OMENode`, meaning any valid OME node object</span>
</span><span id="__span-0-64">
</span><span id="__span-0-65"><span class="sd">    Returns</span>
</span><span id="__span-0-66"><span class="sd">    -------</span>
</span><span id="__span-0-67"><span class="sd">    object: T</span>
</span><span id="__span-0-68"><span class="sd">        The validated (pydantic) model instance.</span>
</span><span id="__span-0-69">
</span><span id="__span-0-70"><span class="sd">    Raises</span>
</span><span id="__span-0-71"><span class="sd">    ------</span>
</span><span id="__span-0-72"><span class="sd">    pydantic.ValidationError</span>
</span><span id="__span-0-73"><span class="sd">        If the validation fails.</span>
</span><span id="__span-0-74"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-75">    <span class="n">adapter</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">](</span><span class="bp">cls</span> <span class="ow">or</span> <span class="n">AnyOME</span><span class="p">)</span>
</span><span id="__span-0-76">    <span class="k">return</span> <span class="n">adapter</span><span class="o">.</span><span class="n">validate_json</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="yaozarrs.validate_ome_object" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">validate_ome_object</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#yaozarrs.validate_ome_object" class="headerlink" title="Link to this section">#</a></h3>
          <div class="doc-overloads">
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">validate_ome_object</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span>
</span></code></pre></div><div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">validate_ome_object</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyOME</span>
</span></code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Validate any python object representing an OME-Zarr document or node.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>node</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The OME Node instance to validate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cls</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<span title="yaozarrs._validate.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class to validate against. Must be a subclass of <code>BaseModel</code>.
If not provided, defaults to <code>AnyOME</code>, meaning "any valid OME node object".</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>object</code></td>            <td>
                  <code><span title="yaozarrs._validate.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The validated (pydantic) model instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pydantic.ValidationError">ValidationError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the validation fails.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_validate.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-17"><span class="k">def</span><span class="w"> </span><span class="nf">validate_ome_object</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="o">|</span> <span class="n">AnyOME</span><span class="p">:</span>
</span><span id="__span-0-18"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate any python object representing an OME-Zarr document or node.</span>
</span><span id="__span-0-19">
</span><span id="__span-0-20"><span class="sd">    Parameters</span>
</span><span id="__span-0-21"><span class="sd">    ----------</span>
</span><span id="__span-0-22"><span class="sd">    node : Any</span>
</span><span id="__span-0-23"><span class="sd">        The OME Node instance to validate.</span>
</span><span id="__span-0-24"><span class="sd">    cls : type[T]</span>
</span><span id="__span-0-25"><span class="sd">        The class to validate against. Must be a subclass of `BaseModel`.</span>
</span><span id="__span-0-26"><span class="sd">        If not provided, defaults to `AnyOME`, meaning &quot;any valid OME node object&quot;.</span>
</span><span id="__span-0-27">
</span><span id="__span-0-28"><span class="sd">    Returns</span>
</span><span id="__span-0-29"><span class="sd">    -------</span>
</span><span id="__span-0-30"><span class="sd">    object: T</span>
</span><span id="__span-0-31"><span class="sd">        The validated (pydantic) model instance.</span>
</span><span id="__span-0-32">
</span><span id="__span-0-33"><span class="sd">    Raises</span>
</span><span id="__span-0-34"><span class="sd">    ------</span>
</span><span id="__span-0-35"><span class="sd">    pydantic.ValidationError</span>
</span><span id="__span-0-36"><span class="sd">        If the validation fails.</span>
</span><span id="__span-0-37"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-38">    <span class="n">adapter</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">[</span><span class="n">T</span><span class="p">](</span><span class="bp">cls</span> <span class="ow">or</span> <span class="n">AnyOME</span><span class="p">)</span>
</span><span id="__span-0-39">    <span class="k">return</span> <span class="n">adapter</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="yaozarrs.validate_ome_uri" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">validate_ome_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#yaozarrs.validate_ome_uri" class="headerlink" title="Link to this section">#</a></h3>
          <div class="doc-overloads">
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">validate_ome_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span>
</span></code></pre></div><div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><span class="nf">validate_ome_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyOMEGroup</span>
</span></code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Load and validate root metadata in a OME-Zarr group from a URI or local path.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This requires that you have installed yaozarrs with the <code>io</code> extra, e.g.
<code>pip install yaozarrs[io]</code>.</p>
</div>
<p>This function will attempt to load the OME-Zarr group metadata from the given URI or
local path. The URI should be a path to a zarr group (directory or URL) with valid
ome-zarr metadata, or a path directly to the metadata JSON file itself (e.g.
zarr.json or .zattrs).</p>
<p><strong>This <em>only</em> loads and validates the root OME-Zarr group metadata.</strong>  It does not
traverse the hierarchy, perform structural validation, or validate any child groups
or arrays.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>uri</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <span title="os.PathLike">PathLike</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URI or local path to the OME-Zarr group. This can be a file path,
a directory path, or a URL.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cls</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<span title="yaozarrs._validate.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The class to validate against. Must be a subclass of <code>BaseModel</code>.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>AnyOME</code></td>            <td>
                  <code><span title="yaozarrs._validate.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of <code>v05.OMEZarrGroupJSON</code>, <code>v04.OMEZarrGroupJSON</code>, or another
valid OME-Zarr node type, depending on the object detected.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="FileNotFoundError">FileNotFoundError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the URI does not point to a valid OME-Zarr group.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pydantic.ValidationError">ValidationError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the loaded metadata is not valid according to the OME-Zarr specification.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_validate.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-83"><span class="k">def</span><span class="w"> </span><span class="nf">validate_ome_uri</span><span class="p">(</span>
</span><span id="__span-0-84">    <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="bp">cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">|</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-0-85"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="o">|</span> <span class="n">AnyOMEGroup</span><span class="p">:</span>
</span><span id="__span-0-86"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load and validate root metadata in a OME-Zarr group from a URI or local path.</span>
</span><span id="__span-0-87">
</span><span id="__span-0-88"><span class="sd">    !!!important</span>
</span><span id="__span-0-89"><span class="sd">        This requires that you have installed yaozarrs with the `io` extra, e.g.</span>
</span><span id="__span-0-90"><span class="sd">        `pip install yaozarrs[io]`.</span>
</span><span id="__span-0-91">
</span><span id="__span-0-92"><span class="sd">    This function will attempt to load the OME-Zarr group metadata from the given URI or</span>
</span><span id="__span-0-93"><span class="sd">    local path. The URI should be a path to a zarr group (directory or URL) with valid</span>
</span><span id="__span-0-94"><span class="sd">    ome-zarr metadata, or a path directly to the metadata JSON file itself (e.g.</span>
</span><span id="__span-0-95"><span class="sd">    zarr.json or .zattrs).</span>
</span><span id="__span-0-96">
</span><span id="__span-0-97"><span class="sd">    **This _only_ loads and validates the root OME-Zarr group metadata.**  It does not</span>
</span><span id="__span-0-98"><span class="sd">    traverse the hierarchy, perform structural validation, or validate any child groups</span>
</span><span id="__span-0-99"><span class="sd">    or arrays.</span>
</span><span id="__span-0-100">
</span><span id="__span-0-101"><span class="sd">    Parameters</span>
</span><span id="__span-0-102"><span class="sd">    ----------</span>
</span><span id="__span-0-103"><span class="sd">    uri : str | os.PathLike</span>
</span><span id="__span-0-104"><span class="sd">        The URI or local path to the OME-Zarr group. This can be a file path,</span>
</span><span id="__span-0-105"><span class="sd">        a directory path, or a URL.</span>
</span><span id="__span-0-106"><span class="sd">    cls : type[T]</span>
</span><span id="__span-0-107"><span class="sd">        The class to validate against. Must be a subclass of `BaseModel`.</span>
</span><span id="__span-0-108">
</span><span id="__span-0-109"><span class="sd">    Returns</span>
</span><span id="__span-0-110"><span class="sd">    -------</span>
</span><span id="__span-0-111"><span class="sd">    AnyOME: T</span>
</span><span id="__span-0-112"><span class="sd">        An instance of `v05.OMEZarrGroupJSON`, `v04.OMEZarrGroupJSON`, or another</span>
</span><span id="__span-0-113"><span class="sd">        valid OME-Zarr node type, depending on the object detected.</span>
</span><span id="__span-0-114">
</span><span id="__span-0-115"><span class="sd">    Raises</span>
</span><span id="__span-0-116"><span class="sd">    ------</span>
</span><span id="__span-0-117"><span class="sd">    FileNotFoundError</span>
</span><span id="__span-0-118"><span class="sd">        If the URI does not point to a valid OME-Zarr group.</span>
</span><span id="__span-0-119"><span class="sd">    pydantic.ValidationError</span>
</span><span id="__span-0-120"><span class="sd">        If the loaded metadata is not valid according to the OME-Zarr specification.</span>
</span><span id="__span-0-121"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-122">    <span class="kn">from</span><span class="w"> </span><span class="nn">._io</span><span class="w"> </span><span class="kn">import</span> <span class="n">read_json_from_uri</span>
</span><span id="__span-0-123">
</span><span id="__span-0-124">    <span class="n">json_content</span><span class="p">,</span> <span class="n">uri_str</span> <span class="o">=</span> <span class="n">read_json_from_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
</span><span id="__span-0-125">    <span class="n">obj</span> <span class="o">=</span> <span class="n">validate_ome_json</span><span class="p">(</span><span class="n">json_content</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">or</span> <span class="n">AnyOMEGroup</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
</span><span id="__span-0-126">    <span class="n">obj</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="n">uri_str</span>
</span><span id="__span-0-127">    <span class="k">return</span> <span class="n">obj</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="yaozarrs.validate_zarr_store" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <code class="highlight language-python"><span class="n">validate_zarr_store</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

<a href="#yaozarrs.validate_zarr_store" class="headerlink" title="Link to this section">#</a></h3>


    <div class="doc doc-contents ">

        <p>Validate both structure and metadata of an OME-Zarr hierarchy.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Requires <code>yaozarrs[io]</code> or <code>fsspec</code> to be installed.</p>
</div>
<p>This is a high-level function to validate both the metadata and the structure
of a complete OME-Zarr store.  This is the function used by the <code>yaozarrs validate</code>
CLI command.</p>
<p>Currently only supports OME-Zarr version 0.5.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>obj</code>
            </td>
            <td>
                  <code><span title="OMEZarrGroupJSON">OMEZarrGroupJSON</span> | <a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;code&gt;ZarrGroup&lt;/code&gt; (&lt;code&gt;yaozarrs._zarr.ZarrGroup&lt;/code&gt;)" href="#yaozarrs.ZarrGroup">ZarrGroup</a> | <span title="str">str</span> | <span title="pathlib.Path">Path</span> | <span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The zarr store to validate. Can be a URI string, a Path, a parsed
OMEZarrGroupJSON object, a ZarrGroup instance, or a zarr.Group object
(for backwards compatibility).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code class=&quot;doc-symbol doc-symbol-heading doc-symbol-class&quot;&gt;&lt;/code&gt;            &lt;code&gt;ZarrGroup&lt;/code&gt; (&lt;code&gt;yaozarrs._zarr.ZarrGroup&lt;/code&gt;)" href="#yaozarrs.ZarrGroup">ZarrGroup</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The opened ZarrGroup if validation is successful.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="yaozarrs._storage.StorageValidationError">StorageValidationError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the storage structure is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/yaozarrs/_storage.py</code></summary>
              <div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-19"><span class="k">def</span><span class="w"> </span><span class="nf">validate_zarr_store</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">ZarrGroup</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ZarrGroup</span><span class="p">:</span>
</span><span id="__span-0-20"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate both structure and metadata of an OME-Zarr hierarchy.</span>
</span><span id="__span-0-21">
</span><span id="__span-0-22"><span class="sd">    !!!important</span>
</span><span id="__span-0-23"><span class="sd">        Requires `yaozarrs[io]` or `fsspec` to be installed.</span>
</span><span id="__span-0-24">
</span><span id="__span-0-25"><span class="sd">    This is a high-level function to validate both the metadata and the structure</span>
</span><span id="__span-0-26"><span class="sd">    of a complete OME-Zarr store.  This is the function used by the `yaozarrs validate`</span>
</span><span id="__span-0-27"><span class="sd">    CLI command.</span>
</span><span id="__span-0-28">
</span><span id="__span-0-29"><span class="sd">    Currently only supports OME-Zarr version 0.5.</span>
</span><span id="__span-0-30">
</span><span id="__span-0-31"><span class="sd">    Parameters</span>
</span><span id="__span-0-32"><span class="sd">    ----------</span>
</span><span id="__span-0-33"><span class="sd">    obj : OMEZarrGroupJSON | ZarrGroup | str | Path | Any</span>
</span><span id="__span-0-34"><span class="sd">        The zarr store to validate. Can be a URI string, a Path, a parsed</span>
</span><span id="__span-0-35"><span class="sd">        OMEZarrGroupJSON object, a ZarrGroup instance, or a zarr.Group object</span>
</span><span id="__span-0-36"><span class="sd">        (for backwards compatibility).</span>
</span><span id="__span-0-37">
</span><span id="__span-0-38"><span class="sd">    Returns</span>
</span><span id="__span-0-39"><span class="sd">    -------</span>
</span><span id="__span-0-40"><span class="sd">    ZarrGroup</span>
</span><span id="__span-0-41"><span class="sd">        The opened ZarrGroup if validation is successful.</span>
</span><span id="__span-0-42">
</span><span id="__span-0-43"><span class="sd">    Raises</span>
</span><span id="__span-0-44"><span class="sd">    ------</span>
</span><span id="__span-0-45"><span class="sd">    StorageValidationError</span>
</span><span id="__span-0-46"><span class="sd">        If the storage structure is invalid.</span>
</span><span id="__span-0-47"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-48">    <span class="n">zarr_group</span> <span class="o">=</span> <span class="n">open_group</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="__span-0-49">    <span class="n">ome_version</span> <span class="o">=</span> <span class="n">zarr_group</span><span class="o">.</span><span class="n">ome_version</span><span class="p">()</span>
</span><span id="__span-0-50">    <span class="k">if</span> <span class="ow">not</span> <span class="n">ome_version</span><span class="p">:</span>
</span><span id="__span-0-51">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="__span-0-52">            <span class="sa">f</span><span class="s2">&quot;Unable to determine OME-Zarr version for </span><span class="si">{</span><span class="n">zarr_group</span><span class="si">}</span><span class="s2">. &quot;</span>
</span><span id="__span-0-53">            <span class="s2">&quot;Is this an OME-Zarr group?&quot;</span>
</span><span id="__span-0-54">        <span class="p">)</span>
</span><span id="__span-0-55">
</span><span id="__span-0-56">    <span class="k">if</span> <span class="n">ome_version</span> <span class="o">==</span> <span class="s2">&quot;0.5&quot;</span><span class="p">:</span>
</span><span id="__span-0-57">        <span class="kn">from</span><span class="w"> </span><span class="nn">yaozarrs.v05._storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">StorageValidatorV05</span>
</span><span id="__span-0-58">
</span><span id="__span-0-59">        <span class="n">Validator</span> <span class="o">=</span> <span class="n">StorageValidatorV05</span>
</span><span id="__span-0-60">    <span class="k">elif</span> <span class="n">ome_version</span> <span class="o">==</span> <span class="s2">&quot;0.4&quot;</span><span class="p">:</span>
</span><span id="__span-0-61">        <span class="kn">from</span><span class="w"> </span><span class="nn">yaozarrs.v04._storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">StorageValidatorV04</span>
</span><span id="__span-0-62">
</span><span id="__span-0-63">        <span class="n">Validator</span> <span class="o">=</span> <span class="n">StorageValidatorV04</span>
</span><span id="__span-0-64">
</span><span id="__span-0-65">    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-66">        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="__span-0-67">            <span class="sa">f</span><span class="s2">&quot;Structural validation for OME-Zarr version </span><span class="si">{</span><span class="n">ome_version</span><span class="si">}</span><span class="s2"> is &quot;</span>
</span><span id="__span-0-68">            <span class="s2">&quot;not implemented.&quot;</span>
</span><span id="__span-0-69">        <span class="p">)</span>
</span><span id="__span-0-70">
</span><span id="__span-0-71">    <span class="c1"># Capture RuntimeWarnings from pydantic validators during validation</span>
</span><span id="__span-0-72">    <span class="c1"># and convert them to StorageValidationWarning</span>
</span><span id="__span-0-73">    <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">captured_warnings</span><span class="p">:</span>
</span><span id="__span-0-74">        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;always&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="n">ValidationWarning</span><span class="p">)</span>
</span><span id="__span-0-75">        <span class="n">result</span> <span class="o">=</span> <span class="n">Validator</span><span class="o">.</span><span class="n">validate_group</span><span class="p">(</span><span class="n">zarr_group</span><span class="p">)</span>
</span><span id="__span-0-76">
</span><span id="__span-0-77">    <span class="c1"># prepend captured warnings to the result</span>
</span><span id="__span-0-78">    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">captured_warnings</span><span class="p">:</span>
</span><span id="__span-0-79">        <span class="n">details</span><span class="p">:</span> <span class="n">ErrorDetails</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-0-80">            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;model_warning&quot;</span><span class="p">,</span>
</span><span id="__span-0-81">            <span class="s2">&quot;loc&quot;</span><span class="p">:</span> <span class="p">(),</span>
</span><span id="__span-0-82">            <span class="s2">&quot;msg&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">message</span><span class="p">),</span>
</span><span id="__span-0-83">        <span class="p">}</span>
</span><span id="__span-0-84">        <span class="n">result</span><span class="o">.</span><span class="n">warnings</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">details</span><span class="p">)</span>
</span><span id="__span-0-85">
</span><span id="__span-0-86">    <span class="c1"># Emit warnings for SHOULD directives from structural validation</span>
</span><span id="__span-0-87">    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">warnings</span><span class="p">:</span>
</span><span id="__span-0-88">        <span class="c1"># Use a custom formatter to match exception style</span>
</span><span id="__span-0-89">        <span class="n">warning_instance</span> <span class="o">=</span> <span class="n">StorageValidationWarning</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">warnings</span><span class="p">)</span>
</span><span id="__span-0-90">
</span><span id="__span-0-91">        <span class="n">_original_formatwarning</span> <span class="o">=</span> <span class="n">warnings</span><span class="o">.</span><span class="n">formatwarning</span>
</span><span id="__span-0-92">
</span><span id="__span-0-93">        <span class="k">def</span><span class="w"> </span><span class="nf">_custom_formatwarning</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">,</span> <span class="o">**</span><span class="n">__</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-0-94">            <span class="c1"># Format like an exception: module.Class: message</span>
</span><span id="__span-0-95">            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">category</span><span class="o">.</span><span class="vm">__module__</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">category</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="__span-0-96">
</span><span id="__span-0-97">        <span class="n">warnings</span><span class="o">.</span><span class="n">formatwarning</span> <span class="o">=</span> <span class="n">_custom_formatwarning</span>  <span class="c1"># type: ignore</span>
</span><span id="__span-0-98">        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-0-99">            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">warning_instance</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-0-100">        <span class="k">finally</span><span class="p">:</span>
</span><span id="__span-0-101">            <span class="n">warnings</span><span class="o">.</span><span class="n">formatwarning</span> <span class="o">=</span> <span class="n">_original_formatwarning</span>
</span><span id="__span-0-102">
</span><span id="__span-0-103">    <span class="c1"># Raise error if any validation issues found</span>
</span><span id="__span-0-104">    <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">is_valid</span><span class="p">:</span>
</span><span id="__span-0-105">        <span class="k">raise</span> <span class="n">StorageValidationError</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
</span><span id="__span-0-106">
</span><span id="__span-0-107">    <span class="k">return</span> <span class="n">zarr_group</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../ome_zarr_guide/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Guide to OME-Zarr">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Guide to OME-Zarr
              </div>
            </div>
          </a>
        
        
          
          <a href="../yaozarrs.v04/" class="md-footer__link md-footer__link--next" aria-label="Next: yaozarrs.v04">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                yaozarrs.v04
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["search.highlight", "search.suggest", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "toc.follow"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../javascripts/yaozarrs-animation.js"></script>
      
    
  </body>
</html>